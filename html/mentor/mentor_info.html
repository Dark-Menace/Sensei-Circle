<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mentor Information</title>
  <!-- Include AngularJS -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
</head>

<body ng-app="myApp" ng-controller="myController" ng-init="getMInfo()">
  <div class="container">
    <h2>Mentor Information</h2>
    <div class="form-group">
      <input type="hidden" name="session_id" ng-model="sessionID" />
    </div>
  </div>
  <div>
    <p>{{ getM.name }}</p>
    <p>{{ getM.mentor_id }}</p>
    <p>{{ getM.phone_no }}</p>
    <p>{{ getM.email }}</p>
    <p>{{ getM.branch_id }}</p>
</div> 

  <script>
    // Define AngularJS module
    angular.module('myApp', [])
      .controller('myController', ['$scope', '$http', '$window', function ($scope, $http, $window) {
        // Retrieve sessionID from local storage
        $scope.sessionID = $window.localStorage.getItem('mentor_session_id');
        // Initialize credentials object
        $scope.credentials = {
          session_id: $scope.sessionID
        };

        // Define function to fetch mentor information
        $scope.getMInfo = function () {
          // Update session_id in credentials
          $scope.credentials.session_id = $scope.sessionID;
          // Send POST request to fetch mentor information
          $http.post('http://localhost:3000/mentor_info_fetch', $scope.credentials)
            .then(function (response) {
              // Handle successful response
              $scope.getM = response.data.results[0]; // Assign response data to $scope.getM
            })
            .catch(function (error) {
              // Handle error
              console.error('Error fetching Mentor Info:', error);
            });
        };
      }]);
  </script>
</body>
</html>
